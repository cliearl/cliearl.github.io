<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='이번 포스팅에서는 SharedPreferences를 사용하는 법에 대해 알아보도록 하겠습니다.
데이터를 앱에 저장하는 방법 데이터를 앱에 저장하는 방법에는 크게 세가지가 있습니다.
 파일 I/O (내부 또는 외부 저장소)  접근 권한을 획득하고 파일을 열었다 닫았다 하는 수고가 필요함   관계형 데이터베이스  SQLite 등을 이용해 복잡한 관계형 데이터를 저장할 수 있음 간단한 데이터를 저장할거라면 구축과 관리에 많은 시간과 노려이 요구됨   SharedPreference  Key/Value 형태로 이용함 내부적으로는 XML 파일로 저장됨 파일을 열고 닫을 필요 없이 핸들러를 만들어서 간편하게 사용가능함    SharedPreferences는 보통 복잡한 데이터를 기록하기보다는, 게임의 환경설정이라든지 그런 단순한 내용을 저장하는데 적절한 저장공간이라고 생각하면 됩니다.'><title>SharedPreferences로 앱 설정값 저장하고 불러오기</title>

<link rel='canonical' href='https://cliearl.github.io/posts/android/sharedpreferences-basic/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='SharedPreferences로 앱 설정값 저장하고 불러오기'>
<meta property='og:description' content='이번 포스팅에서는 SharedPreferences를 사용하는 법에 대해 알아보도록 하겠습니다.
데이터를 앱에 저장하는 방법 데이터를 앱에 저장하는 방법에는 크게 세가지가 있습니다.
 파일 I/O (내부 또는 외부 저장소)  접근 권한을 획득하고 파일을 열었다 닫았다 하는 수고가 필요함   관계형 데이터베이스  SQLite 등을 이용해 복잡한 관계형 데이터를 저장할 수 있음 간단한 데이터를 저장할거라면 구축과 관리에 많은 시간과 노려이 요구됨   SharedPreference  Key/Value 형태로 이용함 내부적으로는 XML 파일로 저장됨 파일을 열고 닫을 필요 없이 핸들러를 만들어서 간편하게 사용가능함    SharedPreferences는 보통 복잡한 데이터를 기록하기보다는, 게임의 환경설정이라든지 그런 단순한 내용을 저장하는데 적절한 저장공간이라고 생각하면 됩니다.'>
<meta property='og:url' content='https://cliearl.github.io/posts/android/sharedpreferences-basic/'>
<meta property='og:site_name' content='냉동코더의 기술블로그'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='SharedPreferences' /><meta property='article:published_time' content='2021-04-20T21:35:43&#43;09:00'/><meta property='article:modified_time' content='2021-04-20T21:35:43&#43;09:00'/>
<meta name="twitter:title" content="SharedPreferences로 앱 설정값 저장하고 불러오기">
<meta name="twitter:description" content="이번 포스팅에서는 SharedPreferences를 사용하는 법에 대해 알아보도록 하겠습니다.
데이터를 앱에 저장하는 방법 데이터를 앱에 저장하는 방법에는 크게 세가지가 있습니다.
 파일 I/O (내부 또는 외부 저장소)  접근 권한을 획득하고 파일을 열었다 닫았다 하는 수고가 필요함   관계형 데이터베이스  SQLite 등을 이용해 복잡한 관계형 데이터를 저장할 수 있음 간단한 데이터를 저장할거라면 구축과 관리에 많은 시간과 노려이 요구됨   SharedPreference  Key/Value 형태로 이용함 내부적으로는 XML 파일로 저장됨 파일을 열고 닫을 필요 없이 핸들러를 만들어서 간편하게 사용가능함    SharedPreferences는 보통 복잡한 데이터를 기록하기보다는, 게임의 환경설정이라든지 그런 단순한 내용을 저장하는데 적절한 저장공간이라고 생각하면 됩니다.">
    <link rel="shortcut icon" href="favicon/favicon.ico" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-769063-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>Back</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/android/" >
                android
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/posts/android/sharedpreferences-basic/">SharedPreferences로 앱 설정값 저장하고 불러오기</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 20, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    3 minute read
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <p>이번 포스팅에서는 SharedPreferences를 사용하는 법에 대해 알아보도록 하겠습니다.</p>
<h2 id="데이터를-앱에-저장하는-방법">데이터를 앱에 저장하는 방법</h2>
<p>데이터를 앱에 저장하는 방법에는 크게 세가지가 있습니다.</p>
<ul>
<li>파일 I/O (내부 또는 외부 저장소)
<ul>
<li>접근 권한을 획득하고 파일을 열었다 닫았다 하는 수고가 필요함</li>
</ul>
</li>
<li>관계형 데이터베이스
<ul>
<li>SQLite 등을 이용해 복잡한 관계형 데이터를 저장할 수 있음</li>
<li>간단한 데이터를 저장할거라면 구축과 관리에 많은 시간과 노려이 요구됨</li>
</ul>
</li>
<li>SharedPreference
<ul>
<li>Key/Value 형태로 이용함</li>
<li>내부적으로는 XML 파일로 저장됨</li>
<li>파일을 열고 닫을 필요 없이 핸들러를 만들어서 간편하게 사용가능함</li>
</ul>
</li>
</ul>
<p>SharedPreferences는 보통 복잡한 데이터를 기록하기보다는, 게임의 환경설정이라든지 그런 단순한 내용을 저장하는데 적절한 저장공간이라고 생각하면 됩니다. 그래서  이번에는 <a class="link" href="https://developer.android.com/reference/android/content/SharedPreferences"  target="_blank" rel="noopener"
    >SharedPreferences</a>를 사용해서 게임설정값을 저장하고 복원하는 앱을 만들어보도록 하겠습니다.</p>
<h2 id="sharedpreferences-사용법">SharedPreferences 사용법</h2>
<ul>
<li><a class="link" href="https://developer.android.com/reference/android/content/Context#getSharedPreferences%28java.lang.String,%20int%29"  target="_blank" rel="noopener"
    >getSharedPreferences(KEY, MODE)</a>로 핸들러를 받아옴
<ul>
<li>MODE에는 MODE_PRIVATE,MODE_WORLD_READABLE, MODE_WORLD_WRITABLE, MODE_MULTI_PROCESS 가 있다</li>
<li>작성한 앱에서만 접근 가능하게 하는 MODE_PRIVATE 를 사용</li>
</ul>
</li>
<li>데이터 기록
<ul>
<li>에디터를 써서 기록할 데이터를 메모리에 올림</li>
<li><a class="link" href="https://developer.android.com/reference/android/content/SharedPreferences.Editor#commit%28%29"  target="_blank" rel="noopener"
    ><code>commit</code></a> 혹은 <a class="link" href="https://developer.android.com/reference/android/content/SharedPreferences.Editor#apply%28%29"  target="_blank" rel="noopener"
    ><code>apply</code></a>로 파일에 기록</li>
</ul>
</li>
</ul>
<h2 id="화면-구성">화면 구성</h2>
<p>위에서부터 순서대로 화면의 요소를 구성하는 여러가지 종류의 버튼을 배치하여 값을 변화시킬수 있도록 구성하였습니다. 앱이 처음 실행되었을 때 표시되는 기본값도 여기서 설정해줍니다. 그리고 마지막으로 SAVE버튼과 LOAD 동작을 하는 버튼 두개도 배치합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span>
    <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
    <span class="na">xmlns:app=</span><span class="s">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
    <span class="na">xmlns:tools=</span><span class="s">&#34;http://schemas.android.com/tools&#34;</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">tools:context=</span><span class="s">&#34;.MainActivity&#34;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/textView&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;50dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;Game Settings&#34;</span>
        <span class="na">android:textSize=</span><span class="s">&#34;30sp&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">&#34;parent&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/textView2&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;40dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;Graphic Quality&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/textView&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;RadioGroup</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/radio_graphics&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;20dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:orientation=</span><span class="s">&#34;horizontal&#34;</span>
        <span class="na">android:checkedButton=</span><span class="s">&#34;@id/radioButton_medium&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/textView2&#34;</span><span class="nt">&gt;</span>

        <span class="nt">&lt;RadioButton</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/radioButton_low&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Low&#34;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;RadioButton</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/radioButton_medium&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Medium&#34;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;RadioButton</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/radioButton_high&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;High&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/RadioGroup&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/textView3&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;40dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;Music Volume&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/radio_graphics&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;SeekBar</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/seekBar_music&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;20dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:max=</span><span class="s">&#34;100&#34;</span>
        <span class="na">android:progress=</span><span class="s">&#34;50&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/textView3&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/textView4&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;40dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;SFX Volume&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/seekBar_music&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;SeekBar</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/seekBar_sfx&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;20dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:max=</span><span class="s">&#34;100&#34;</span>
        <span class="na">android:progress=</span><span class="s">&#34;50&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/textView4&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;TextView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/textView5&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;40dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;Enable Vertical Sync&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/seekBar_sfx&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;androidx.appcompat.widget.SwitchCompat</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/switch_vsync&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginStart=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;30dp&#34;</span>
        <span class="na">android:layout_marginEnd=</span><span class="s">&#34;16dp&#34;</span>
        <span class="na">android:checked=</span><span class="s">&#34;true&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/seekBar_sfx&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/button_save&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;70dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;SAVE&#34;</span>

        <span class="na">app:layout_constraintEnd_toStartOf=</span><span class="s">&#34;@+id/button_load&#34;</span>
        <span class="na">app:layout_constraintHorizontal_bias=</span><span class="s">&#34;0.5&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/textView5&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/button_load&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_marginTop=</span><span class="s">&#34;70dp&#34;</span>
        <span class="na">android:text=</span><span class="s">&#34;LOAD&#34;</span>

        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintHorizontal_bias=</span><span class="s">&#34;0.5&#34;</span>
        <span class="na">app:layout_constraintStart_toEndOf=</span><span class="s">&#34;@+id/button_save&#34;</span>
        <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">&#34;@+id/textView5&#34;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</code></pre></div><h2 id="버튼에-클릭리스너-설정">버튼에 클릭리스너 설정</h2>
<p>View Binding을 적용하고 SAVE 버튼을 눌렀을 때는 <code>savePref</code>, LOAD 버튼을 눌렀을때는 <code>loadPref</code>를 실행하도록 합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">lateinit</span> <span class="k">var</span> <span class="py">binding</span><span class="p">:</span> <span class="n">ActivityMainBinding</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="n">binding</span> <span class="p">=</span> <span class="n">ActivityMainBinding</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">layoutInflater</span><span class="p">)</span>
        <span class="n">setContentView</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>

        <span class="n">binding</span><span class="p">.</span><span class="n">buttonSave</span><span class="p">.</span><span class="n">setOnClickListener</span> <span class="p">{</span>
            <span class="n">savePref</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">buttonLoad</span><span class="p">.</span><span class="n">setOnClickListener</span> <span class="p">{</span>
            <span class="n">loadPref</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">fun</span> <span class="nf">savePref</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">}</span>

    <span class="k">private</span> <span class="k">fun</span> <span class="nf">loadPref</span><span class="p">()</span> <span class="p">{</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id="접근키-작성">접근키 작성</h2>
<p>SharedPreferences는 키-밸류 형태로 값을 저장하고 불러오기 때문에 이 때 사용할 키 값을 companion object로 준비해서 편하게 사용할 수 있도록 준비합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">companion</span> <span class="k">object</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">const</span> <span class="k">val</span> <span class="py">KEY</span><span class="n">_PREFS</span> <span class="p">=</span> <span class="s2">&#34;game_settings&#34;</span>
    <span class="k">private</span> <span class="k">const</span> <span class="k">val</span> <span class="py">KEY</span><span class="n">_GRAPHIC</span> <span class="p">=</span> <span class="s2">&#34;graphic_quality&#34;</span>
    <span class="k">private</span> <span class="k">const</span> <span class="k">val</span> <span class="py">KEY</span><span class="n">_MUSIC</span> <span class="p">=</span> <span class="s2">&#34;music_volume&#34;</span>
    <span class="k">private</span> <span class="k">const</span> <span class="k">val</span> <span class="py">KEY</span><span class="n">_SFX</span> <span class="p">=</span> <span class="s2">&#34;sfx_volume&#34;</span>
    <span class="k">private</span> <span class="k">const</span> <span class="k">val</span> <span class="py">KEY</span><span class="n">_VSYNC</span> <span class="p">=</span> <span class="s2">&#34;vertical_sync&#34;</span>
<span class="p">}</span>
</code></pre></div><h2 id="savepref-작성">savePref() 작성</h2>
<p>데이터를 저장하는 부분을 작성합니다. 핸들러를 만들고 에디터 객체를 만들어서 <code>editor.put</code>함수로 Key-Value 쌍을 저장하도록 했습니다. 버튼의 값은 개체가 가진 프로퍼티로 가져올 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">private</span> <span class="k">fun</span> <span class="nf">savePref</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">sharedPreferences</span> <span class="p">=</span> <span class="n">getSharedPreferences</span><span class="p">(</span><span class="n">KEY_PREFS</span><span class="p">,</span> <span class="n">Context</span><span class="p">.</span><span class="n">MODE_PRIVATE</span><span class="p">)</span>
    <span class="k">val</span> <span class="py">editor</span> <span class="p">=</span> <span class="n">sharedPreferences</span><span class="p">.</span><span class="n">edit</span><span class="p">()</span>

    <span class="n">editor</span><span class="p">.</span><span class="n">putInt</span><span class="p">(</span><span class="n">KEY_GRAPHIC</span><span class="p">,</span> <span class="n">binding</span><span class="p">.</span><span class="n">radioGraphics</span><span class="p">.</span><span class="n">checkedRadioButtonId</span><span class="p">)</span>
    <span class="n">editor</span><span class="p">.</span><span class="n">putInt</span><span class="p">(</span><span class="n">KEY_MUSIC</span><span class="p">,</span> <span class="n">binding</span><span class="p">.</span><span class="n">seekBarMusic</span><span class="p">.</span><span class="n">progress</span><span class="p">)</span>
    <span class="n">editor</span><span class="p">.</span><span class="n">putInt</span><span class="p">(</span><span class="n">KEY_SFX</span><span class="p">,</span> <span class="n">binding</span><span class="p">.</span><span class="n">seekBarSfx</span><span class="p">.</span><span class="n">progress</span><span class="p">)</span>
    <span class="n">editor</span><span class="p">.</span><span class="n">putBoolean</span><span class="p">(</span><span class="n">KEY_VSYNC</span><span class="p">,</span> <span class="n">binding</span><span class="p">.</span><span class="n">switchVsync</span><span class="p">.</span><span class="n">isChecked</span><span class="p">)</span>

    <span class="n">editor</span><span class="p">.</span><span class="n">apply</span><span class="p">()</span>
    <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="s2">&#34;Game settings has saved&#34;</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></div><h2 id="loadpref-작성">loadPref() 작성</h2>
<p>저장된 데이터를 불러오는 부분을 작성합니다. 저장할때와 마찬가지로 핸들러를 만들고 저장할때 사용한 키와 동일한 키를 사용해서 <code>get</code>함수로 값을 불러온 뒤 그 값을 버튼에 반영합니다. 이 때 <code>contains</code>를 사용해서 SharedPreferences 데이터가 존재하는지를 우선 확인하고 작업을 수행하도록 했습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">private</span> <span class="k">fun</span> <span class="nf">loadPref</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">sharedPreferences</span> <span class="p">=</span> <span class="n">getSharedPreferences</span><span class="p">(</span><span class="n">KEY_PREFS</span><span class="p">,</span> <span class="n">Context</span><span class="p">.</span><span class="n">MODE_PRIVATE</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sharedPreferences</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="n">KEY_GRAPHIC</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">graphicValue</span> <span class="p">=</span> <span class="n">sharedPreferences</span><span class="p">.</span><span class="n">getInt</span><span class="p">(</span><span class="n">KEY_GRAPHIC</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
        <span class="k">val</span> <span class="py">musicValue</span> <span class="p">=</span> <span class="n">sharedPreferences</span><span class="p">.</span><span class="n">getInt</span><span class="p">(</span><span class="n">KEY_MUSIC</span><span class="p">,</span> <span class="m">50</span><span class="p">)</span>
        <span class="k">val</span> <span class="py">sfxValue</span> <span class="p">=</span> <span class="n">sharedPreferences</span><span class="p">.</span><span class="n">getInt</span><span class="p">(</span><span class="n">KEY_SFX</span><span class="p">,</span> <span class="m">50</span><span class="p">)</span>
        <span class="k">val</span> <span class="py">vsyncValue</span> <span class="p">=</span> <span class="n">sharedPreferences</span><span class="p">.</span><span class="n">getBoolean</span><span class="p">(</span><span class="n">KEY_VSYNC</span><span class="p">,</span> <span class="k">true</span><span class="p">)</span>

        <span class="n">binding</span><span class="p">.</span><span class="n">radioGraphics</span><span class="p">.</span><span class="n">check</span><span class="p">(</span><span class="n">graphicValue</span><span class="p">)</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">seekBarMusic</span><span class="p">.</span><span class="n">progress</span> <span class="p">=</span> <span class="n">musicValue</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">seekBarSfx</span><span class="p">.</span><span class="n">progress</span> <span class="p">=</span> <span class="n">sfxValue</span>
        <span class="n">binding</span><span class="p">.</span><span class="n">switchVsync</span><span class="p">.</span><span class="n">isChecked</span> <span class="p">=</span> <span class="n">vsyncValue</span>

        <span class="n">Toast</span><span class="p">.</span><span class="n">makeText</span><span class="p">(</span><span class="n">applicationContext</span><span class="p">,</span> <span class="s2">&#34;Game settings has loaded&#34;</span><span class="p">,</span> <span class="n">Toast</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div><p>이렇게 SharedPreferences를 써서 앱의 데이터를 저장하고 불러오는 법에 대해 알아보았습니다.</p>
<figure><a href="https://github.com/cliearl/android-tutorial/tree/master/SharedPreferencesBasic"><img src="/images/posts/sourcecode.png"/></a>
</figure>

<div class="video-wrapper">
    <iframe loading="lazy" 
            src="https://www.youtube.com/embed/4rYMfpbpwPA" 
            allowfullscreen 
            title="YouTube Video"
    >
    </iframe>
</div>


</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/sharedpreferences/">SharedPreferences</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/posts/android/sharedpreferneces-gson/">
        
        

        <div class="article-details">
            <h2 class="article-title">SharedPreferences를 json 포맷으로 관리하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/prevent-fragment-memory-leak-during-viewbinding/">
        
        

        <div class="article-details">
            <h2 class="article-title">View Binding 사용시 Fragment의 메모리 누수 대응하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/download-json-data-using-retrofit/">
        
        

        <div class="article-details">
            <h2 class="article-title">Retrofit으로 다운받은 Json 데이터를 RecyclerView에 표시하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/android-http-library-review/">
        
        

        <div class="article-details">
            <h2 class="article-title">안드로이드의 HTTP 통신 라이브러리 고찰</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/android-studio-plugins/">
        
        

        <div class="article-details">
            <h2 class="article-title">내가 Android Studio에서 사용하는 Plugins</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="cliearl/cliearl.github.io"
        issue-term="cliearl"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2019 - 
        
        2021 냉동코더의 기술블로그
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.5.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">Table of contents</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#데이터를-앱에-저장하는-방법">데이터를 앱에 저장하는 방법</a></li>
    <li><a href="#sharedpreferences-사용법">SharedPreferences 사용법</a></li>
    <li><a href="#화면-구성">화면 구성</a></li>
    <li><a href="#버튼에-클릭리스너-설정">버튼에 클릭리스너 설정</a></li>
    <li><a href="#접근키-작성">접근키 작성</a></li>
    <li><a href="#savepref-작성">savePref() 작성</a></li>
    <li><a href="#loadpref-작성">loadPref() 작성</a></li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
