<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='이번 포스팅에서는 RecyclerView에 ListAdapter를 적용하는 법에 대해 알아보도록 하겠습니다.
'><title>DiffUtil과 ListAdapter 이해하고 RecyclerView에 적용하기</title>

<link rel='canonical' href='https://cliearl.github.io/posts/android/recyclerview-listadapter/'>

<link rel="stylesheet" href="/scss/style.min.css"><meta property='og:title' content='DiffUtil과 ListAdapter 이해하고 RecyclerView에 적용하기'>
<meta property='og:description' content='이번 포스팅에서는 RecyclerView에 ListAdapter를 적용하는 법에 대해 알아보도록 하겠습니다.
'>
<meta property='og:url' content='https://cliearl.github.io/posts/android/recyclerview-listadapter/'>
<meta property='og:site_name' content='냉동코더의 기술블로그'>
<meta property='og:type' content='article'><meta property='article:section' content='Posts' /><meta property='article:tag' content='RecyclerView' /><meta property='article:tag' content='ListAdapter' /><meta property='article:published_time' content='2021-07-31T21:22:17&#43;09:00'/><meta property='article:modified_time' content='2021-07-31T21:22:17&#43;09:00'/>
<meta name="twitter:title" content="DiffUtil과 ListAdapter 이해하고 RecyclerView에 적용하기">
<meta name="twitter:description" content="이번 포스팅에서는 RecyclerView에 ListAdapter를 적용하는 법에 대해 알아보도록 하겠습니다.
">
    <link rel="shortcut icon" href="favicon/favicon.ico" />

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-769063-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
    </head>
    <body class="
    article-page has-toc
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    
        extended
    
">
    
        <div id="article-toolbar">
            <a href="https://cliearl.github.io" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>Back</span>
            </a>
        </div>
    
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/android/" >
                android
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/posts/android/recyclerview-listadapter/">DiffUtil과 ListAdapter 이해하고 RecyclerView에 적용하기</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jul 31, 2021</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    6 minute read
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    <p>이번 포스팅에서는 RecyclerView에 ListAdapter를 적용하는 법에 대해 알아보도록 하겠습니다.</p>
<h2 id="들어가기">들어가기</h2>
<p>리사이클러뷰의 데이터가 변하면 리사이클러뷰 어댑터가 제공하는 <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#notifyDataSetChanged%28%29"  target="_blank" rel="noopener"
    ><code>notifyItem</code></a> 메소드를 사용해서 뷰홀더 내용을 갱신할 수 있습니다.</p>
<pre tabindex="0"><code>notifyItemChanged(int)
notifyItemInserted(int)
notifyItemRemoved(int)
notifyItemRangeChanged(int, int)
notifyItemRangeInserted(int, int)
notifyItemRangeRemoved(int, int)
</code></pre><p>그런데 데이터가 변경되는 방식을 확인하고 그때마다 이렇게 notify를 일일이 해 주는것은 번거롭기도 하고, 또 사용하기에 따라서는 갱신이 필요없는 뷰홀더를 같이 갱신하는 불필요한 작업이 생길수도 있습니다.</p>
<h2 id="diffutil">DiffUtil</h2>
<p><a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/DiffUtil"  target="_blank" rel="noopener"
    ><code>DiffUtil</code></a>은 두 데이터셋을 받아서 그 차이를 계산해주는 클래스입니다. DiffUtil을 사용하면 두 데이터 셋을 비교한 뒤 그중 변한부분만을 파악하여 리사이클러뷰에 반영할 수 있습니다.</p>
<p>DiffUtil은 Eugene W. Myers의 difference 알고리즘을 이용해서 O(N + D^2)시간 안에 리스트의 비교를 수행하는데 넥서스 5X에서 테스트를 수행한 결과는 다음과 같았다고 합니다. 이때 N은 추가 및 제거된 항목의 갯수이고, D는 스크립트의 길이입니다.</p>
<pre tabindex="0"><code>100 items and 10 modifications: avg: 0.39 ms, median: 0.35 ms
100 items and 100 modifications: 3.82 ms, median: 3.75 ms
100 items and 100 modifications without moves: 2.09 ms, median: 2.06 ms
1000 items and 50 modifications: avg: 4.67 ms, median: 4.59 ms
1000 items and 50 modifications without moves: avg: 3.59 ms, median: 3.50 ms
1000 items and 200 modifications: 27.07 ms, median: 26.92 ms
1000 items and 200 modifications without moves: 13.54 ms, median: 13.36 ms 
</code></pre><p>DiffUtil을 사용하기 위해서는 <a class="link" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/DiffUtil.Callback"  target="_blank" rel="noopener"
    ><code>DiffUtil.Callback()</code></a>을 상속받아 <a class="link" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/DiffUtil.Callback#areitemsthesame"  target="_blank" rel="noopener"
    ><code>areItemsTheSame</code></a>으로 비교대상인 두 객체가 동일한지 확인하고, <a class="link" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/DiffUtil.Callback#arecontentsthesame"  target="_blank" rel="noopener"
    ><code>areContentsTheSame</code></a>으로 두 아이템이 동일한 데이터를 가지는지 확인하면 됩니다.</p>
<h2 id="asynclistdiffer">AsyncListDiffer</h2>
<p>DiffUtil은 아이템 개수가 많을 경우 비교연산시간에 필요한 시간이 길어질 수 있기 때문에 백그라운드 스레드에서 처리되어야 합니다. <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/AsyncListDiffer"  target="_blank" rel="noopener"
    ><code>AsyncListDiffer</code></a>는 DiffUtil을 편하게 쓰기 위해서 만들어진 클래스로, DiffUtil에 대해 자체적으로 스레드 처리를 해 줍니다.</p>
<p>코드를 사용하기 위해서는 우선 어댑터 내부로 DiffUtil 콜백을 전달받은 AsyncListDiffer 객체를 만들어 줍니다. 그리고 <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/AsyncListDiffer#getCurrentList%28%29"  target="_blank" rel="noopener"
    ><code>currentList</code></a>로 데이터를 참조하고 <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/AsyncListDiffer#submitList%28java.util.List%3CT%3E%29"  target="_blank" rel="noopener"
    ><code>submitList</code></a> 로 리스트 데이터를 갱신하면 됩니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="c1">// Google Developers에서 제공하는 코드
</span><span class="c1"></span><span class="kd">class</span> <span class="nc">UserAdapter</span> <span class="kd">extends</span> <span class="n">RecyclerView</span><span class="o">.</span><span class="na">Adapter</span><span class="o">&lt;</span><span class="n">UserViewHolder</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">AsyncListDiffer</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">mDiffer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AsyncListDiffer</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">DIFF_CALLBACK</span><span class="o">);</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getItemCount</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mDiffer</span><span class="o">.</span><span class="na">getCurrentList</span><span class="o">().</span><span class="na">size</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">submitList</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mDiffer</span><span class="o">.</span><span class="na">submitList</span><span class="o">(</span><span class="n">list</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBindViewHolder</span><span class="o">(</span><span class="n">UserViewHolder</span> <span class="n">holder</span><span class="o">,</span> <span class="kt">int</span> <span class="n">position</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">mDiffer</span><span class="o">.</span><span class="na">getCurrentList</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">position</span><span class="o">);</span>
        <span class="n">holder</span><span class="o">.</span><span class="na">bindTo</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">DiffUtil</span><span class="o">.</span><span class="na">ItemCallback</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">DIFF_CALLBACK</span>
            <span class="o">=</span> <span class="k">new</span> <span class="n">DiffUtil</span><span class="o">.</span><span class="na">ItemCallback</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">areItemsTheSame</span><span class="o">(</span>
                <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">oldUser</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">newUser</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// User properties may have changed if reloaded from the DB, but ID is fixed
</span><span class="c1"></span>            <span class="k">return</span> <span class="n">oldUser</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">==</span> <span class="n">newUser</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">areContentsTheSame</span><span class="o">(</span>
                <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">oldUser</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">newUser</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// NOTE: if you use equals, your object must properly override Object#equals()
</span><span class="c1"></span>            <span class="c1">// Incorrectly returning false here will result in too many animations.
</span><span class="c1"></span>            <span class="k">return</span> <span class="n">oldUser</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">newUser</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><h2 id="listadapter">ListAdapter</h2>
<p><a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/ListAdapter"  target="_blank" rel="noopener"
    ><code>ListAdapter</code></a>는 AsyncListDiffer를 더 쓰기 편하도록 랩핑한 클래스로 리사이클러뷰 어댑터를 만들때 ListAdapter를 상속하도록 하면 됩니다. 초기화할때 DiffUtil 콜백 객체를 받도록 하면 나머지는 AsyncListDiffer와 같이 <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/ListAdapter#getCurrentList%28%29"  target="_blank" rel="noopener"
    ><code>currentList</code></a>로 현재 데이터를 불러올 수 있고, <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/ListAdapter#submitList%28java.util.List%3CT%3E%29"  target="_blank" rel="noopener"
    ><code>submitList</code></a>로 데이터를 갱신할 수 있습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="c1">// Google Developers에서 제공하는 코드
</span><span class="c1"></span><span class="k">class</span> <span class="nc">UserAdapter</span> <span class="n">extends</span> <span class="n">ListAdapter</span><span class="p">&lt;</span><span class="n">User</span><span class="p">,</span> <span class="n">UserViewHolder</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">UserAdapter</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="n">User</span><span class="p">.</span><span class="n">DIFF_CALLBACK</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nd">@Override</span>
    <span class="k">public</span> <span class="n">void</span> <span class="n">onBindViewHolder</span><span class="p">(</span><span class="n">UserViewHolder</span> <span class="n">holder</span><span class="p">,</span> <span class="n">int</span> <span class="n">position</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">holder</span><span class="p">.</span><span class="n">bindTo</span><span class="p">(</span><span class="n">getItem</span><span class="p">(</span><span class="n">position</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">public</span> <span class="n">static</span> <span class="k">final</span> <span class="n">DiffUtil</span><span class="p">.</span><span class="n">ItemCallback</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;</span> <span class="n">DIFF_CALLBACK</span> <span class="p">=</span>
            <span class="n">new</span> <span class="n">DiffUtil</span><span class="p">.</span><span class="n">ItemCallback</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;()</span> <span class="p">{</span>
        <span class="nd">@Override</span>
        <span class="k">public</span> <span class="n">boolean</span> <span class="n">areItemsTheSame</span><span class="p">(</span>
                <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">oldUser</span><span class="p">,</span> <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">newUser</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// User properties may have changed if reloaded from the DB, but ID is fixed
</span><span class="c1"></span>            <span class="k">return</span> <span class="n">oldUser</span><span class="p">.</span><span class="n">getId</span><span class="p">()</span> <span class="o">==</span> <span class="n">newUser</span><span class="p">.</span><span class="n">getId</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nd">@Override</span>
        <span class="k">public</span> <span class="n">boolean</span> <span class="n">areContentsTheSame</span><span class="p">(</span>
                <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">oldUser</span><span class="p">,</span> <span class="nd">@NonNull</span> <span class="n">User</span> <span class="n">newUser</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// NOTE: if you use equals, your object must properly override Object#equals()
</span><span class="c1"></span>            <span class="c1">// Incorrectly returning false here will result in too many animations.
</span><span class="c1"></span>            <span class="k">return</span> <span class="n">oldUser</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">newUser</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>다시말해 리사이클러뷰 어댑터를 ListAdapter로 구현하면 데이터가 어떻게 바뀌든간에 submitList로 전체 리스트를 넘겨주기만 하면 어댑터가 알아서 백그라운드 스레드를 사용해 리스트 차이를 계산하여 화면을 갱신시켜주게 됩니다.</p>
<h2 id="앱-작성">앱 작성</h2>
<p>기존에 <a class="link" href="https://youtu.be/opPmxtI4rLQ"  target="_blank" rel="noopener"
    >다른 강의</a>에서 작성했던 프로젝트를 고치는 형태로 프로젝트를 만들어 보겠습니다.</p>
<h3 id="monsterkt">Monster.kt</h3>
<p>우선 리사이클러뷰에 표시할 데이터를 데이터클래스형태로 준비합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">data</span> <span class="k">class</span> <span class="nc">Monster</span><span class="p">(</span>
    <span class="k">val</span> <span class="py">name</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">race</span><span class="p">:</span> <span class="n">Race</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">level</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span>
    <span class="k">val</span> <span class="py">stats</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;,</span>
    <span class="k">val</span> <span class="py">encount</span><span class="p">:</span> <span class="n">Boolean</span>
<span class="p">)</span>

<span class="k">enum</span> <span class="k">class</span> <span class="nc">Race</span> <span class="p">{</span>
    <span class="n">Zombie</span><span class="p">,</span> <span class="n">Human</span><span class="p">,</span> <span class="n">Goblin</span><span class="p">,</span> <span class="n">Dragon</span>
<span class="p">}</span>
</code></pre></div><h3 id="view_itemlistxml">view_itemlist.xml</h3>
<p>리사이클러뷰의 뷰홀더 레이아웃을 만들어줍니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
    <span class="na">android:id=</span><span class="s">&#34;@+id/vhLayout&#34;</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
    <span class="na">android:background=</span><span class="s">&#34;?attr/selectableItemBackground&#34;</span>
    <span class="na">android:baselineAligned=</span><span class="s">&#34;false&#34;</span>
    <span class="na">android:gravity=</span><span class="s">&#34;center_vertical&#34;</span>
    <span class="na">android:orientation=</span><span class="s">&#34;horizontal&#34;</span>
    <span class="na">android:padding=</span><span class="s">&#34;10dp&#34;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;LinearLayout</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_weight=</span><span class="s">&#34;9&#34;</span>
        <span class="na">android:orientation=</span><span class="s">&#34;vertical&#34;</span><span class="nt">&gt;</span>

        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/tv_name&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:padding=</span><span class="s">&#34;3dp&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Monster name&#34;</span>
            <span class="na">android:textSize=</span><span class="s">&#34;24sp&#34;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/tv_race&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Race&#34;</span>
            <span class="na">android:textSize=</span><span class="s">&#34;18sp&#34;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/tv_level&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Level&#34;</span>
            <span class="na">android:textSize=</span><span class="s">&#34;18sp&#34;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/tv_stats&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Stats&#34;</span>
            <span class="na">android:textSize=</span><span class="s">&#34;18sp&#34;</span> <span class="nt">/&gt;</span>

        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">&#34;@+id/tv_encount&#34;</span>
            <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
            <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
            <span class="na">android:text=</span><span class="s">&#34;Encount&#34;</span>
            <span class="na">android:textSize=</span><span class="s">&#34;18sp&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>

    <span class="nt">&lt;ImageView</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;30dp&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;30dp&#34;</span>
        <span class="na">android:layout_gravity=</span><span class="s">&#34;center&#34;</span>
        <span class="na">android:layout_weight=</span><span class="s">&#34;1&#34;</span>
        <span class="na">android:src=</span><span class="s">&#34;@drawable/ic_baseline_reorder_24&#34;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre></div><h3 id="myviewholderkt">MyViewHolder.kt</h3>
<p>리사이클러뷰의 뷰홀더 클래스를 만들어줍니다. 뷰바인딩을 사용하도록 세팅하고 나중에 투명도를 바꾸는데 사용하도록 <code>setAlpha</code> 함수를 만들어줍니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">class</span> <span class="nc">MyViewHolder</span><span class="p">(</span><span class="k">private</span> <span class="k">val</span> <span class="py">binding</span><span class="p">:</span> <span class="n">ViewItemlistBinding</span><span class="p">)</span> <span class="p">:</span>

    <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">bind</span><span class="p">(</span><span class="k">data</span><span class="p">:</span> <span class="n">Monster</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">with</span><span class="p">(</span><span class="n">binding</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">tvName</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;Name: </span><span class="si">${data.name}</span><span class="s2">&#34;</span>
            <span class="n">tvRace</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;Race: </span><span class="si">${data.race}</span><span class="s2">&#34;</span>
            <span class="n">tvLevel</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;Level: </span><span class="si">${data.level}</span><span class="s2">&#34;</span>
            <span class="n">tvStats</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;HP: </span><span class="si">${data.stats[0]}</span><span class="s2"> / MP: </span><span class="si">${data.stats[1]}</span><span class="s2"> / Exp: </span><span class="si">${data.stats[2]}</span><span class="s2">&#34;</span>
            <span class="n">tvEncount</span><span class="p">.</span><span class="n">text</span> <span class="p">=</span> <span class="s2">&#34;Encounted: </span><span class="si">${data.encount}</span><span class="s2">&#34;</span>

            <span class="n">vhLayout</span><span class="p">.</span><span class="n">setOnClickListener</span> <span class="p">{</span>
                <span class="n">Snackbar</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="k">it</span><span class="p">,</span> <span class="s2">&#34;Item </span><span class="si">$layoutPosition</span><span class="s2"> touched!&#34;</span><span class="p">,</span> <span class="n">Snackbar</span><span class="p">.</span><span class="n">LENGTH_SHORT</span><span class="p">).</span><span class="n">show</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">setAlpha</span><span class="p">(</span><span class="n">alpha</span><span class="p">:</span> <span class="n">Float</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">with</span><span class="p">(</span><span class="n">binding</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">tvName</span><span class="p">.</span><span class="n">alpha</span> <span class="p">=</span> <span class="n">alpha</span>
            <span class="n">tvRace</span><span class="p">.</span><span class="n">alpha</span> <span class="p">=</span> <span class="n">alpha</span>
            <span class="n">tvLevel</span><span class="p">.</span><span class="n">alpha</span> <span class="p">=</span> <span class="n">alpha</span>
            <span class="n">tvStats</span><span class="p">.</span><span class="n">alpha</span> <span class="p">=</span> <span class="n">alpha</span>
            <span class="n">tvEncount</span><span class="p">.</span><span class="n">alpha</span> <span class="p">=</span> <span class="n">alpha</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="mydiffcallbackkt">MyDiffCallback.kt</h3>
<p>Monster 클래스가 <a class="link" href="https://kotlinlang.org/docs/data-classes.html"  target="_blank" rel="noopener"
    >데이터 클래스</a>이므로 <code>areItemsTheSame</code>은 자동으로 생성되는 <code>hashCode</code>로 비교하도록 하였습니다. 데이터클래스의 정의에 따라 동일한 두 객체의 hashCode는 동일한 값을 갖게 됩니다. 또한 <code>equals</code>도 데이터클래스의 정의에 의해 자동으로 생성되므로 <code>areContentsTheSame</code> 메소드는 equals를 이용해 구현합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">class</span> <span class="nc">MyDiffCallback</span> <span class="p">:</span> <span class="n">DiffUtil</span><span class="p">.</span><span class="n">ItemCallback</span><span class="p">&lt;</span><span class="n">Monster</span><span class="p">&gt;()</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">areItemsTheSame</span><span class="p">(</span><span class="n">oldItem</span><span class="p">:</span> <span class="n">Monster</span><span class="p">,</span> <span class="n">newItem</span><span class="p">:</span> <span class="n">Monster</span><span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">oldItem</span><span class="p">.</span><span class="n">hashCode</span><span class="p">()</span> <span class="o">==</span> <span class="n">newItem</span><span class="p">.</span><span class="n">hashCode</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">areContentsTheSame</span><span class="p">(</span><span class="n">oldItem</span><span class="p">:</span> <span class="n">Monster</span><span class="p">,</span> <span class="n">newItem</span><span class="p">:</span> <span class="n">Monster</span><span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">oldItem</span> <span class="o">==</span> <span class="n">newItem</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="mylistadapterkt">MyListAdapter.kt</h3>
<p>ListAdapter를 상속받는 리사이클러뷰 어댑터를 작성합니다. onCreateViewHolder에서 뷰바인딩을 사용하도록 설정합니다. 데이터의 개수는 ListAdapter가 관리하므로 기존의 리사이클러뷰 어댑터에서 정의했던 <a class="link" href="https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#getItemCount%28%29"  target="_blank" rel="noopener"
    ><code>getItemCount</code></a>는 오버라이드하지 않아도 됩니다.</p>
<p>그리고 아이템을 이동했을때 실행할 <code>moveItem</code>, 지울때 실행할 <code>removeItem</code> 메소드를 작성해줍니다. 이 때 ListAdapter에서는 데이터를 직접 조작할 수 없고 비교만 할수 있기 때문에 변형된 데이터셋은 새로운 객체로 만들어 기존의 데이터셋과 비교도록 submitList를 수행하게 합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">class</span> <span class="nc">MyListAdapter</span> <span class="p">:</span> <span class="n">ListAdapter</span><span class="p">&lt;</span><span class="n">Monster</span><span class="p">,</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">&gt;(</span><span class="n">MyDiffCallback</span><span class="p">())</span> <span class="p">{</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreateViewHolder</span><span class="p">(</span><span class="n">parent</span><span class="p">:</span> <span class="n">ViewGroup</span><span class="p">,</span> <span class="n">viewType</span><span class="p">:</span> <span class="n">Int</span><span class="p">):</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">viewHolder</span> <span class="p">=</span> <span class="n">MyViewHolder</span><span class="p">(</span>
            <span class="n">ViewItemlistBinding</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span>
                <span class="n">LayoutInflater</span><span class="p">.</span><span class="n">from</span><span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">context</span><span class="p">),</span>
                <span class="n">parent</span><span class="p">,</span>
                <span class="k">false</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">viewHolder</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onBindViewHolder</span><span class="p">(</span><span class="n">holder</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">holder</span> <span class="k">is</span> <span class="n">MyViewHolder</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">val</span> <span class="py">monster</span> <span class="p">=</span> <span class="n">getItem</span><span class="p">(</span><span class="n">position</span><span class="p">)</span> <span class="k">as</span> <span class="n">Monster</span>
            <span class="n">holder</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">monster</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">moveItem</span><span class="p">(</span><span class="n">fromPosition</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">toPosition</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">newList</span> <span class="p">=</span> <span class="n">currentList</span><span class="p">.</span><span class="n">toMutableList</span><span class="p">()</span>
        <span class="c1">// val item = newList.removeAt(fromPosition)
</span><span class="c1"></span>        <span class="c1">// newList.add(toPosition, item)
</span><span class="c1"></span>        <span class="n">Collections</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="n">newList</span><span class="p">,</span> <span class="n">fromPosition</span><span class="p">,</span> <span class="n">toPosition</span><span class="p">)</span>
        <span class="n">submitList</span><span class="p">(</span><span class="n">newList</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">removeItem</span><span class="p">(</span><span class="n">position</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">val</span> <span class="py">newList</span> <span class="p">=</span> <span class="n">currentList</span><span class="p">.</span><span class="n">toMutableList</span><span class="p">()</span>
        <span class="n">newList</span><span class="p">.</span><span class="n">removeAt</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="n">submitList</span><span class="p">(</span><span class="n">newList</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="myitemtouchhelpercallbackkt">MyItemTouchHelperCallback.kt</h3>
<p>기존 프로젝트에서 터치 콜백을 받기 위해 MainActivity에서 사용했던 <a class="link" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/ItemTouchHelper.SimpleCallback"  target="_blank" rel="noopener"
    ><code>ItemTouchHelper.SimpleCallback</code></a> 클래스는 코드의 가독성을 위해 개별 클래스로 분리시키겠습니다.</p>
<p>그리고 추가로 홀딩중인 뷰홀더의 투명도를 변화시켜 더 인지하기 쉽게 만들겠습니다. 그럴려면 <a class="link" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/ItemTouchHelper.Callback#onselectedchanged"  target="_blank" rel="noopener"
    ><code>onSelectedChanged</code></a>에서 투명도를 50%로 낮추었다가 <a class="link" href="https://developer.android.com/reference/kotlin/androidx/recyclerview/widget/ItemTouchHelper.Callback#clearview"  target="_blank" rel="noopener"
    ><code>clearView</code></a>에서 다시 100%로 되돌리도록 하면 됩니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">class</span> <span class="nc">MyItemTouchHelperCallback</span><span class="p">(</span><span class="k">private</span> <span class="k">val</span> <span class="py">recyclerView</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">ItemTouchHelper</span><span class="p">.</span><span class="n">SimpleCallback</span><span class="p">(</span>
        <span class="n">ItemTouchHelper</span><span class="p">.</span><span class="n">UP</span> <span class="n">or</span> <span class="n">ItemTouchHelper</span><span class="p">.</span><span class="n">DOWN</span><span class="p">,</span>
        <span class="n">ItemTouchHelper</span><span class="p">.</span><span class="n">LEFT</span>
    <span class="p">)</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onMove</span><span class="p">(</span>
        <span class="n">recyclerView</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">,</span>
        <span class="n">viewHolder</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">,</span>
        <span class="n">target</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span>
    <span class="p">):</span> <span class="n">Boolean</span> <span class="p">{</span>
        <span class="p">(</span><span class="n">recyclerView</span><span class="p">.</span><span class="n">adapter</span> <span class="k">as</span> <span class="n">MyListAdapter</span><span class="p">).</span><span class="n">moveItem</span><span class="p">(</span>
            <span class="n">viewHolder</span><span class="p">.</span><span class="n">absoluteAdapterPosition</span><span class="p">,</span>
            <span class="n">target</span><span class="p">.</span><span class="n">absoluteAdapterPosition</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="k">true</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onSwiped</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="n">recyclerView</span><span class="p">.</span><span class="n">adapter</span> <span class="k">as</span> <span class="n">MyListAdapter</span><span class="p">).</span><span class="n">removeItem</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">.</span><span class="n">layoutPosition</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1">// 홀딩중인 뷰홀더 투명도를 변경
</span><span class="c1"></span>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onSelectedChanged</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span><span class="p">?,</span> <span class="n">actionState</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">onSelectedChanged</span><span class="p">(</span><span class="n">viewHolder</span><span class="p">,</span> <span class="n">actionState</span><span class="p">)</span>
        <span class="k">when</span> <span class="p">(</span><span class="n">actionState</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">ItemTouchHelper</span><span class="p">.</span><span class="n">ACTION_STATE_DRAG</span><span class="p">,</span> <span class="n">ItemTouchHelper</span><span class="p">.</span><span class="n">ACTION_STATE_SWIPE</span> <span class="o">-&gt;</span> <span class="p">{</span>
                <span class="p">(</span><span class="n">viewHolder</span> <span class="k">as</span> <span class="n">MyViewHolder</span><span class="p">).</span><span class="n">setAlpha</span><span class="p">(</span><span class="m">0.5f</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 홀딩중인 뷰홀더 투명도를 되돌림
</span><span class="c1"></span>    <span class="k">override</span> <span class="k">fun</span> <span class="nf">clearView</span><span class="p">(</span>
        <span class="n">recyclerView</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">,</span>
        <span class="n">viewHolder</span><span class="p">:</span> <span class="n">RecyclerView</span><span class="p">.</span><span class="n">ViewHolder</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">clearView</span><span class="p">(</span><span class="n">recyclerView</span><span class="p">,</span> <span class="n">viewHolder</span><span class="p">)</span>
        <span class="p">(</span><span class="n">viewHolder</span> <span class="k">as</span> <span class="n">MyViewHolder</span><span class="p">).</span><span class="n">setAlpha</span><span class="p">(</span><span class="m">1.0f</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id="activity_mainxml">activity_main.xml</h3>
<p>리사이클러뷰와 플로팅버튼을 배치해줍니다. 기존의 터치조작에 더해 DiffUtil의 테스트를 위해 플로팅버튼을 누르면 데이터가 랜덤하게 뒤섞이는 기능이 수행되도록 하겠습니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
    <span class="na">xmlns:app=</span><span class="s">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
    <span class="na">xmlns:tools=</span><span class="s">&#34;http://schemas.android.com/tools&#34;</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">tools:context=</span><span class="s">&#34;.MainActivity&#34;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;androidx.recyclerview.widget.RecyclerView</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/recyclerview&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;0dp&#34;</span>
        <span class="na">android:scrollbars=</span><span class="s">&#34;vertical&#34;</span>
        <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintStart_toStartOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">tools:listitem=</span><span class="s">&#34;@layout/view_itemlist&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;com.google.android.material.floatingactionbutton.FloatingActionButton</span>
        <span class="na">android:id=</span><span class="s">&#34;@+id/fab&#34;</span>
        <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
        <span class="na">android:layout_margin=</span><span class="s">&#34;20dp&#34;</span>
        <span class="na">android:src=</span><span class="s">&#34;@drawable/ic_baseline_add_24&#34;</span>
        <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">&#34;parent&#34;</span>
        <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">&#34;parent&#34;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</code></pre></div><h3 id="mainactivitykt">MainActivity.kt</h3>
<p>데이터셋에 초기값을 넣어주고, 어댑터 인스턴스를 생성하여 리사이클러뷰와 연동시킵니다. 그리고 터치헬퍼를 달아 스와이프와 드래그를 했을때 데이터가 잘 갱신되는지 확인합니다.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-kotlin" data-lang="kotlin"><span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">AppCompatActivity</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">private</span> <span class="k">val</span> <span class="py">binding</span><span class="p">:</span> <span class="n">ActivityMainBinding</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
        <span class="n">ActivityMainBinding</span><span class="p">.</span><span class="n">inflate</span><span class="p">(</span><span class="n">layoutInflater</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">private</span> <span class="k">val</span> <span class="py">myListAdapter</span><span class="p">:</span> <span class="n">MyListAdapter</span> <span class="k">by</span> <span class="n">lazy</span> <span class="p">{</span>
        <span class="n">MyListAdapter</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">val</span> <span class="py">dataSet</span> <span class="p">=</span> <span class="n">arrayListOf</span><span class="p">&lt;</span><span class="n">Monster</span><span class="p">&gt;().</span><span class="n">apply</span> <span class="p">{</span>
        <span class="n">add</span><span class="p">(</span><span class="n">Monster</span><span class="p">(</span><span class="s2">&#34;타일런트&#34;</span><span class="p">,</span> <span class="n">Race</span><span class="p">.</span><span class="n">Zombie</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">50</span><span class="p">),</span> <span class="k">false</span><span class="p">))</span>
        <span class="n">add</span><span class="p">(</span><span class="n">Monster</span><span class="p">(</span><span class="s2">&#34;조커&#34;</span><span class="p">,</span> <span class="n">Race</span><span class="p">.</span><span class="n">Human</span><span class="p">,</span> <span class="m">23</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> <span class="m">100</span><span class="p">),</span> <span class="k">false</span><span class="p">))</span>
        <span class="n">add</span><span class="p">(</span><span class="n">Monster</span><span class="p">(</span><span class="s2">&#34;그렘린&#34;</span><span class="p">,</span> <span class="n">Race</span><span class="p">.</span><span class="n">Goblin</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="k">true</span><span class="p">))</span>
        <span class="n">add</span><span class="p">(</span><span class="n">Monster</span><span class="p">(</span><span class="s2">&#34;리오레우스&#34;</span><span class="p">,</span> <span class="n">Race</span><span class="p">.</span><span class="n">Dragon</span><span class="p">,</span> <span class="m">2500</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="m">10000</span><span class="p">,</span> <span class="m">1000</span><span class="p">,</span> <span class="m">50000</span><span class="p">),</span> <span class="k">false</span><span class="p">))</span>
        <span class="n">add</span><span class="p">(</span><span class="n">Monster</span><span class="p">(</span><span class="s2">&#34;사우론&#34;</span><span class="p">,</span> <span class="n">Race</span><span class="p">.</span><span class="n">Human</span><span class="p">,</span> <span class="m">100</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">200</span><span class="p">,</span> <span class="m">1000</span><span class="p">),</span> <span class="k">false</span><span class="p">))</span>
        <span class="n">add</span><span class="p">(</span><span class="n">Monster</span><span class="p">(</span><span class="s2">&#34;리바이어던&#34;</span><span class="p">,</span> <span class="n">Race</span><span class="p">.</span><span class="n">Dragon</span><span class="p">,</span> <span class="m">50</span><span class="p">,</span> <span class="n">listOf</span><span class="p">(</span><span class="m">2000</span><span class="p">,</span> <span class="m">250</span><span class="p">,</span> <span class="m">10000</span><span class="p">),</span> <span class="k">true</span><span class="p">))</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">:</span> <span class="n">Bundle</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">.</span><span class="n">onCreate</span><span class="p">(</span><span class="n">savedInstanceState</span><span class="p">)</span>
        <span class="n">setContentView</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">root</span><span class="p">)</span>


        <span class="n">binding</span><span class="p">.</span><span class="n">recyclerview</span><span class="p">.</span><span class="n">apply</span> <span class="p">{</span>
            <span class="n">layoutManager</span> <span class="p">=</span>
                <span class="n">LinearLayoutManager</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">LinearLayoutManager</span><span class="p">.</span><span class="n">VERTICAL</span><span class="p">,</span> <span class="k">false</span><span class="p">)</span>
            <span class="n">addItemDecoration</span><span class="p">(</span><span class="n">DividerItemDecoration</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">DividerItemDecoration</span><span class="p">.</span><span class="n">VERTICAL</span><span class="p">))</span>
            <span class="n">adapter</span> <span class="p">=</span> <span class="n">myListAdapter</span>
        <span class="p">}</span>
        <span class="n">myListAdapter</span><span class="p">.</span><span class="n">submitList</span><span class="p">(</span><span class="n">dataSet</span><span class="p">)</span>

        <span class="n">binding</span><span class="p">.</span><span class="n">fab</span><span class="p">.</span><span class="n">setOnClickListener</span> <span class="p">{</span>
            <span class="n">myListAdapter</span><span class="p">.</span><span class="n">submitList</span><span class="p">(</span><span class="n">dataSet</span><span class="p">.</span><span class="n">shuffled</span><span class="p">())</span>
        <span class="p">}</span>

        <span class="k">val</span> <span class="py">itemTouchHelper</span> <span class="p">=</span> <span class="n">ItemTouchHelper</span><span class="p">(</span><span class="n">MyItemTouchHelperCallback</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">recyclerview</span><span class="p">))</span>
        <span class="n">itemTouchHelper</span><span class="p">.</span><span class="n">attachToRecyclerView</span><span class="p">(</span><span class="n">binding</span><span class="p">.</span><span class="n">recyclerview</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>이렇게해서 ListAdapter를 RecyclerView에 적용하는 법에 대해 알아보았습니다.</p>
<div class="video-wrapper">
    <iframe loading="lazy" 
            src="https://www.youtube.com/embed/zNGVicOZ2ew" 
            allowfullscreen 
            title="YouTube Video"
    >
    </iframe>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/recyclerview/">recyclerview</a>
        
            <a href="/tags/listadapter/">ListAdapter</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY 4.0</span>
    </section>
    </footer>


    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="">
    <a href="/posts/android/recyclerview-touch/">
        
        

        <div class="article-details">
            <h2 class="article-title">RecyclerView를 Swipe, Drag, Touch하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/recyclerview-implement/">
        
        

        <div class="article-details">
            <h2 class="article-title">앱에서 RecyclerView 사용하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/viewbinding-recyclerview/">
        
        

        <div class="article-details">
            <h2 class="article-title">RecyclerView에 View Binding 적용하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/dataclass-recyclerview/">
        
        

        <div class="article-details">
            <h2 class="article-title">Data class 이해하고 RecyclerView에서 사용하기</h2>
        </div>
    </a>
</article>
                
                    
<article class="">
    <a href="/posts/android/understanding-singleton-pattern/">
        
        

        <div class="article-details">
            <h2 class="article-title">알기쉬운 Singleton Pattern</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
     
        
    <script src="https://utteranc.es/client.js" 
        repo="cliearl/cliearl.github.io"
        issue-term="cliearl"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2021 냉동코더의 기술블로그
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer="true"
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer="true"
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
        <aside class="sidebar right-sidebar sticky">
            <section class="widget archives">
                <div class="widget-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



                </div>
                <h2 class="widget-title section-title">Table of contents</h2>
                
                <div class="widget--toc">
                    <nav id="TableOfContents">
  <ol>
    <li><a href="#들어가기">들어가기</a></li>
    <li><a href="#diffutil">DiffUtil</a></li>
    <li><a href="#asynclistdiffer">AsyncListDiffer</a></li>
    <li><a href="#listadapter">ListAdapter</a></li>
    <li><a href="#앱-작성">앱 작성</a>
      <ol>
        <li><a href="#monsterkt">Monster.kt</a></li>
        <li><a href="#view_itemlistxml">view_itemlist.xml</a></li>
        <li><a href="#myviewholderkt">MyViewHolder.kt</a></li>
        <li><a href="#mydiffcallbackkt">MyDiffCallback.kt</a></li>
        <li><a href="#mylistadapterkt">MyListAdapter.kt</a></li>
        <li><a href="#myitemtouchhelpercallbackkt">MyItemTouchHelperCallback.kt</a></li>
        <li><a href="#activity_mainxml">activity_main.xml</a></li>
        <li><a href="#mainactivitykt">MainActivity.kt</a></li>
      </ol>
    </li>
  </ol>
</nav>
                </div>
            </section>
        </aside>
    

        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                defer="false"
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
